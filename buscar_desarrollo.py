desarrollos_lugares_referencia = {
    'Kartesia_Residencial': {
        'lugares_referencia': ['minerva', ' morelos', 'morelos', 'hidalgo', 'centro magno', 'los arcos', 'arcos Vallarta', 'arcos e Guadalajara', 'mutuo', 'hotel las pergolas', 'ladr√≥n de guevara', 'la f√°llele', ' Vallarta', 'colonia arcos', 'francisco de Quevedo', 'duque de Rivas', 'GDL', 'Guadalajara', 'todos', 'andares' ],
        'nombre_completo': 'Kartesia Residencial',
        'direccion': 'üìçZona Minerva', #C. Jos√© Mar√≠a Morelos 2238-Sur, Arcos, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/QkVnHLpt4UwF486m9 \u200B',
        'precio_desde': 3360000,
        'precio_hasta': 4560000,
        'num_recamaras': 3,
        'num_banos': 2,
        'num_estacionamientos': 1,

        'num_r_recamaras': "1 a 3",
        'num_r_banos': "1 a 2",
        'num_r_estacionamientos': 1
    },
    'Sant_M√§arten_Lofts': {
        'lugares_referencia': ['col. Americana', 'colonia americana', 'la americana', 'americana', 'chapu', 'paseo Chapultepec', 'Chapultepec', 'ni√±os heroes', 'mexicaltzingo', 'Guadalupe zuno', 'jose Guadalupe zuno', 'mariano otero', 'circunvalaci√≥n Agustin Y√°√±ez', 'Agustin Y√°√±ez', 'Washington', 'col moderna', 'col obrera', 'vidrio', 'union', ' americas', 'plaza punto Chapultepec', 'Simon bolivar', 'Marsella', 'agencia ford', 'ford', 'ford jalisco motors', 'museo mura o mura', 'GDL', 'Guadalajara', '√°rea metropolitana de Guadalajara', 'AMG', 'todos', 'andares'],
        'nombre_completo': 'Sant M√§arten Lofts',
        'direccion': 'üìçZona Chapu',# 'C. Gral. San Mart√≠n 584, Col Americana, Barrera, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/gLq1HkuiXFF5bpKw5 \u200B',
        'precio_desde': 3050000,
        'precio_hasta': 4840000,
        'num_recamaras': 3,
        'num_banos': 2,
        'num_estacionamientos': 1,

        'num_r_recamaras':"1 a 3",
        'num_r_banos': "1.5 y 2",
        'num_r_estacionamientos': 1
    },
    'Soneto_Residencial': {
        'lugares_referencia': ['col. Americana', 'colonia americana', 'la americana', 'americana', 'chapu', 'paseo Chapultepec', ' Chapultepec', 'horizontes Chapultepec', 'glorieta ni√±os h√©roes', 'mexicaltzingo', 'Guadalupe zuno', 'jose Guadalupe zuno', 'Casa ileso Clijero', 'casa Jose Guadalupe zuno', 'casa Zuno', ' union', 'americas', 'Miguel de Cervantes Saedra', 'Efra√≠n Gonzales luna', 'lerdo de tejada', 'ECI', 'escuela culinaria internacional', 'Consulado americano', 'USA', 'Demetria', 'Santo Coyote', ' union', ' americas', 'plaza punto Chapultepec', ' La Paz', 'GDL', 'Guadalajara', 'todos', 'andares'],
        'nombre_completo': 'Soneto Residencial',
        'direccion': 'üìçZona La Americana', #'C. Jos√© Guadalupe Zuno Hern√°ndez 2274-A, Col Americana, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/q37TKMZdXSjzuJfd9 \u200B',
        'precio_desde': 3590000,
        'precio_hasta': 5680000,
        'num_recamaras': 3,
        'num_banos': 4,
        'num_estacionamientos': 2,

        'num_r_recamaras': "1 a 3",
        'num_r_banos': "1 a 4",
        'num_r_estacionamientos': "1 y 2"
    },
    'Maria_Jose_Living': {
        'lugares_referencia': ['Zona centro', 'centro', 'tren ligero', 'El retiro', 'centro hist√≥rico', 'GDL', 'Guadalajara', 'parque morelos', 'ciudad creativa digital', 'ciudad creativa', 'CCD', 'CUCS', 'Centro universitario de ciencias de la salud', 'hospital civil', 'calzada independencia', 'San Diego', 'Catedral', 'san Juan de Dios', 'Sant johnny fashion mall', 'estaci√≥n alameda', 'macro bus', 'mi macro', 'plaza tapatia', 'Ignacio Altamirano', 'Jos√© encarnaci√≥n rosas', 'Esteban Alatorre', 'juaqu√≠n √°ngulo', 'Garibaldi', 'hospicio caba√±as', 'centro joyero', 'todos', 'andares'],
        'nombre_completo': 'Maria Jos√© Living',
        'direccion': 'üìçZona Centro Hist√≥rico',#C. San Diego 112, El Retiro, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/tdvZZc6MNdZDTag77 \u200B',
        'precio_desde': 1495000,
        'precio_hasta': 2575000,
        'num_recamaras': 2,
        'num_banos': 3,
        'num_estacionamientos': 1,

        'num_r_recamaras': "1 y 2",
        'num_r_banos': "1 a 3",
        'num_r_estacionamientos': "0 y 1"
    },
    'The_Block_ITESO': {
        'lugares_referencia': ['√°rea metropolitana de Guadalajara', 'macro bus', 'AMG', 'ZMG', 'zona metropolitana de Guadalajara', 'ITESO', 'Instituto tecnol√≥gico y de estudios superiores de occidente', 'perif√©rico sur', 'Manuel Gomez Morin', 'cerro del gachup√≠n', 'cerro el tesoro', 'anillo perif√©rico', 'Lopez Mateos', 'el mante', 'santuario de los m√°rtires', 'santuario cristo rey', 'sur', 'Plaza Ubika', 'UVM', 'UVM sur', 'todos', 'andares'],
        'nombre_completo': 'The Block ITESO Easy Living',
        'direccion': 'üìçZona Iteso',  #'Perif. Sur Manuel G√≥mez Mor√≠n 8331 Tlaquepaque, Jal.',
        'link_maps': 'https://goo.gl/maps/kFvRRtHgZG6AyAC3A \u200B',
        'precio_desde': 1900000,
        'precio_hasta': 3600000,
        'num_recamaras': 2,
        'num_banos': 2,
        'num_estacionamientos': 2,

        'num_r_recamaras': "1 y 2",
        'num_r_banos': "1 y 2",
        'num_r_estacionamientos': "1 y 2"
    },
    'Almira_Mirador_Vertical': {
        'lugares_referencia': ['Parque Mirador Independencia', 'macro bus', 'huentit√°n', 'CUAAD', 'periferico norte', 'Centro universitario de Arte Arquitectura y dise√±o', 'universidad de arquitectura', 'facultad de arquitectura', 'arquitectura', 'UDG', 'universidad de Guadalajara', 'UDG', 'UdeG', 'huentint√°n','huentit√°n', 'huentitan', 'barranca', 'volc√°n babuyan', 'volc√°n Zacapu', 'Volcan popocatepetl', 'calzada independencia', 'Estaci√≥n de microb√∫s mirador', 'mi macro', 'macro bus', 'Zool√≥gico', 'Zoologico', 'Perif√©rico Norte', 'zoo', 'todos', 'andares'],
        'nombre_completo': 'Almira Mirador Vertical',
        'direccion': 'üìçZona Barranca',#'C. Volc√°n Babuyan 5759, Huentit√°n El Bajo, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/sfbU8NDCyCdeLfbm9 \u200B',
        'precio_desde': 1600000,
        'precio_hasta': 2750000,
        'num_recamaras': 2,
        'num_banos': 2,
        'num_estacionamientos': 2,

        'num_r_recamaras': '1 y 2',
        'num_r_banos': '1 y 2',
        'num_r_estacionamientos': '1 y 2'
    }
}

def buscar_desarrollo(ubicacion=None, presupuesto=None, recamaras=None, banos=None, estacionamientos=None):
    # Aqu√≠ va la l√≥gica para buscar desarrollos seg√∫n los criterios proporcionados
    # Retorna una lista de desarrollos que cumplen con los criterios de b√∫squeda
    # Puedes usar las funciones que definiste previamente como buscar_por_lugares_referencia, buscar_por_precio, etc.

    # Inicializamos una lista vac√≠a para almacenar los resultados coincidentes
    resultados_coincidentes = []

    # Ejemplo de b√∫squeda por ubicaci√≥n
    if ubicacion:
        desarrollos_por_ubicacion = buscar_por_lugares_referencia(ubicacion)
        resultados_coincidentes.extend(desarrollos_por_ubicacion)
        print("Resultados por ubicaci√≥n:", desarrollos_por_ubicacion)

    # Ejemplo de b√∫squeda por precio
    if presupuesto:
        desarrollos_por_precio = buscar_por_precio(presupuesto)
        resultados_coincidentes.extend(desarrollos_por_precio)
        print("Resultados por precio:", desarrollos_por_precio)

    # Ejemplo de b√∫squeda por rec√°maras
    if recamaras:
        desarrollos_por_recamaras = buscar_por_recamaras(recamaras)
        resultados_coincidentes.extend(desarrollos_por_recamaras)
        print("Resultados por rec√°maras:", desarrollos_por_recamaras)

    # Ejemplo de b√∫squeda por ba√±os
    if banos:
        desarrollos_por_banos = buscar_por_banos(banos)
        resultados_coincidentes.extend(desarrollos_por_banos)
        print("Resultados por ba√±os:", desarrollos_por_banos)

    # Ejemplo de b√∫squeda por estacionamientos
    if estacionamientos:
        desarrollos_por_estacionamientos = buscar_por_estacionamientos(estacionamientos)
        resultados_coincidentes.extend(desarrollos_por_estacionamientos)
        print("Resultados por estacionamientos:", desarrollos_por_estacionamientos)

    # Eliminamos duplicados manteniendo el orden original de los resultados
    resultados_coincidentes = list(dict.fromkeys(resultados_coincidentes))

    return resultados_coincidentes

def buscar_por_lugares_referencia(lugar):
    resultados = []
    lugar = lugar.lower()  # Convertir a min√∫sculas
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        lugares_referencia = [lugar_ref.lower() for lugar_ref in info_desarrollo['lugares_referencia']]
        if lugar in lugares_referencia:
            resultados.append(desarrollo)
    return resultados


"""def buscar_por_lugares_referencia(lugar):
    resultados = []
    lugar = lugar.lower()  # Convertir a min√∫sculas
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        lugares_referencia = [lugar_ref.lower() for lugar_ref in info_desarrollo['lugares_referencia']]
        if lugar in lugares_referencia:
            resultados.append(desarrollo)
    return resultados"""



def buscar_por_precio(precio_minimo):
    precio_minimo_con_tolerancia = precio_minimo + 110000  # Agregar 100,000 de tolerancia

    desarrollos_precios = desarrollos_lugares_referencia.items()

    # Filtrar desarrollos con precios mayores o iguales al precio m√≠nimo
    desarrollos_filtrados = [(desarrollo, info_desarrollo) for desarrollo, info_desarrollo in desarrollos_precios if info_desarrollo['precio_desde'] <= precio_minimo_con_tolerancia]

    if not desarrollos_filtrados:
        # Si no hay desarrollos con precios mayores o iguales al precio m√≠nimo,
        # buscamos el desarrollo m√°s cercano al precio m√≠nimo
        desarrollo_mas_cercano = min(desarrollos_precios, key=lambda x: abs(x[1]['precio_desde'] - precio_minimo))
        return [desarrollo_mas_cercano[0]]
    else:
        # Si hay desarrollos que cumplen con el precio m√≠nimo, los agregamos a los resultados
        return [desarrollo for desarrollo, _ in desarrollos_filtrados]



def buscar_por_recamaras(recamaras):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_recamaras'] >= recamaras:
            resultados.append(desarrollo)
    return resultados

def buscar_por_banos(banos):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_banos'] >= banos:
            resultados.append(desarrollo)
    return resultados

def buscar_por_estacionamientos(estacionamientos):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_estacionamientos'] >= estacionamientos:
            resultados.append(desarrollo)
    return resultados






def obtener_info_desarrollos_coincidentes(desarrollos_coincidentes):
    if not desarrollos_coincidentes:
        return "No hemos encontrado desarrollos que se ajusten a tus necesidades."

    lista_desarrollos = []
    for desarrollo in desarrollos_coincidentes:
        if desarrollo in desarrollos_lugares_referencia:
            info_desarrollo = desarrollos_lugares_referencia[desarrollo]
            nombre_completo = info_desarrollo['nombre_completo']
            direccion = info_desarrollo['direccion']
            link_maps = info_desarrollo['link_maps']
            precio_desde = info_desarrollo['precio_desde']
            num_recamaras = info_desarrollo['num_r_recamaras']
            num_banos = info_desarrollo['num_r_banos']
            num_estacionamientos = info_desarrollo['num_r_estacionamientos']

            respuesta = f"*{nombre_completo}* üè¢ \n{direccion}\n{link_maps}\nüí∞ Desde: ${precio_desde:,}\nüõèÔ∏è Rec√°maras: {num_recamaras}, üõÅ Ba√±os: {num_banos}, üöó Estacionamientos: {num_estacionamientos}\n\n"
            lista_desarrollos.append(respuesta)

    print("\n".join(lista_desarrollos))
    return "\n".join(lista_desarrollos)



"""
# Ejemplo de b√∫squeda por precio
precio_minimo = 3000000
desarrollos_coincidentes_precio = buscar_por_precio(precio_minimo)
informacion_desarrollos_precio = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_precio)
print(informacion_desarrollos_precio)"""


"""# Ejemplo de b√∫squeda por lugar de referencia
lugar_referencia = "andares"
desarrollos_coincidentes_lugar = buscar_por_lugares_referencia(lugar_referencia)
informacion_desarrollos_lugar = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_lugar)
print(informacion_desarrollos_lugar)"""

"""# Ejemplo de b√∫squeda por ba√±os
desarrollos_coincidentes_banos = buscar_por_banos(4)
informacion_desarrollos_banos = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_banos)
print(informacion_desarrollos_banos)


# Ejemplo de b√∫squeda por rec√°maras
desarrollos_coincidentes_recamaras = buscar_por_recamaras(2)
informacion_desarrollos_recamaras = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_recamaras)
print(informacion_desarrollos_recamaras)


# Ejemplo de b√∫squeda por estacionamientos
desarrollos_coincidentes_estacionamientos = buscar_por_estacionamientos(1)
informacion_desarrollos_estacionamientos = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_estacionamientos)
print(informacion_desarrollos_estacionamientos)
"""