desarrollos_lugares_referencia = {
    'Kartesia_Residencial': {
        'lugares_referencia': ['minerva', ' morelos', 'morelos', 'hidalgo', 'centro magno', 'los arcos', 'arcos Vallarta', 'arcos e Guadalajara', 'mutuo', 'hotel las pergolas', 'ladrón de guevara', 'la fállele', ' Vallarta', 'colonia arcos', 'francisco de Quevedo', 'duque de Rivas', 'GDL', 'Guadalajara', 'todos', 'andares' ],
        'nombre_completo': 'Kartesia Residencial',
        'direccion': '📍Zona Minerva', #C. José María Morelos 2238-Sur, Arcos, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/QkVnHLpt4UwF486m9 \u200B',
        'precio_desde': 3360000,
        'precio_hasta': 4560000,
        'num_recamaras': 3,
        'num_banos': 2,
        'num_estacionamientos': 1,

        'num_r_recamaras': "1 a 3",
        'num_r_banos': "1 a 2",
        'num_r_estacionamientos': 1
    },
    'Sant_Mäarten_Lofts': {
        'lugares_referencia': ['col. Americana', 'colonia americana', 'la americana', 'americana', 'chapu', 'paseo Chapultepec', 'Chapultepec', 'niños heroes', 'mexicaltzingo', 'Guadalupe zuno', 'jose Guadalupe zuno', 'mariano otero', 'circunvalación Agustin Yáñez', 'Agustin Yáñez', 'Washington', 'col moderna', 'col obrera', 'vidrio', 'union', ' americas', 'plaza punto Chapultepec', 'Simon bolivar', 'Marsella', 'agencia ford', 'ford', 'ford jalisco motors', 'museo mura o mura', 'GDL', 'Guadalajara', 'área metropolitana de Guadalajara', 'AMG', 'todos', 'andares'],
        'nombre_completo': 'Sant Mäarten Lofts',
        'direccion': '📍Zona Chapu',# 'C. Gral. San Martín 584, Col Americana, Barrera, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/gLq1HkuiXFF5bpKw5 \u200B',
        'precio_desde': 3050000,
        'precio_hasta': 4840000,
        'num_recamaras': 3,
        'num_banos': 2,
        'num_estacionamientos': 1,

        'num_r_recamaras':"1 a 3",
        'num_r_banos': "1.5 y 2",
        'num_r_estacionamientos': 1
    },
    'Soneto_Residencial': {
        'lugares_referencia': ['col. Americana', 'colonia americana', 'la americana', 'americana', 'chapu', 'paseo Chapultepec', ' Chapultepec', 'horizontes Chapultepec', 'glorieta niños héroes', 'mexicaltzingo', 'Guadalupe zuno', 'jose Guadalupe zuno', 'Casa ileso Clijero', 'casa Jose Guadalupe zuno', 'casa Zuno', ' union', 'americas', 'Miguel de Cervantes Saedra', 'Efraín Gonzales luna', 'lerdo de tejada', 'ECI', 'escuela culinaria internacional', 'Consulado americano', 'USA', 'Demetria', 'Santo Coyote', ' union', ' americas', 'plaza punto Chapultepec', ' La Paz', 'GDL', 'Guadalajara', 'todos', 'andares'],
        'nombre_completo': 'Soneto Residencial',
        'direccion': '📍Zona La Americana', #'C. José Guadalupe Zuno Hernández 2274-A, Col Americana, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/q37TKMZdXSjzuJfd9 \u200B',
        'precio_desde': 3590000,
        'precio_hasta': 5680000,
        'num_recamaras': 3,
        'num_banos': 4,
        'num_estacionamientos': 2,

        'num_r_recamaras': "1 a 3",
        'num_r_banos': "1 a 4",
        'num_r_estacionamientos': "1 y 2"
    },
    'Maria_Jose_Living': {
        'lugares_referencia': ['Zona centro', 'centro', 'tren ligero', 'El retiro', 'centro histórico', 'GDL', 'Guadalajara', 'parque morelos', 'ciudad creativa digital', 'ciudad creativa', 'CCD', 'CUCS', 'Centro universitario de ciencias de la salud', 'hospital civil', 'calzada independencia', 'San Diego', 'Catedral', 'san Juan de Dios', 'Sant johnny fashion mall', 'estación alameda', 'macro bus', 'mi macro', 'plaza tapatia', 'Ignacio Altamirano', 'José encarnación rosas', 'Esteban Alatorre', 'juaquín ángulo', 'Garibaldi', 'hospicio cabañas', 'centro joyero', 'todos', 'andares'],
        'nombre_completo': 'Maria José Living',
        'direccion': '📍Zona Centro Histórico',#C. San Diego 112, El Retiro, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/tdvZZc6MNdZDTag77 \u200B',
        'precio_desde': 1495000,
        'precio_hasta': 2575000,
        'num_recamaras': 2,
        'num_banos': 3,
        'num_estacionamientos': 1,

        'num_r_recamaras': "1 y 2",
        'num_r_banos': "1 a 3",
        'num_r_estacionamientos': "0 y 1"
    },
    'The_Block_ITESO': {
        'lugares_referencia': ['área metropolitana de Guadalajara', 'macro bus', 'AMG', 'ZMG', 'zona metropolitana de Guadalajara', 'ITESO', 'Instituto tecnológico y de estudios superiores de occidente', 'periférico sur', 'Manuel Gomez Morin', 'cerro del gachupín', 'cerro el tesoro', 'anillo periférico', 'Lopez Mateos', 'el mante', 'santuario de los mártires', 'santuario cristo rey', 'sur', 'Plaza Ubika', 'UVM', 'UVM sur', 'todos', 'andares'],
        'nombre_completo': 'The Block ITESO Easy Living',
        'direccion': '📍Zona Iteso',  #'Perif. Sur Manuel Gómez Morín 8331 Tlaquepaque, Jal.',
        'link_maps': 'https://goo.gl/maps/kFvRRtHgZG6AyAC3A \u200B',
        'precio_desde': 1900000,
        'precio_hasta': 3600000,
        'num_recamaras': 2,
        'num_banos': 2,
        'num_estacionamientos': 2,

        'num_r_recamaras': "1 y 2",
        'num_r_banos': "1 y 2",
        'num_r_estacionamientos': "1 y 2"
    },
    'Almira_Mirador_Vertical': {
        'lugares_referencia': ['Parque Mirador Independencia', 'macro bus', 'huentitán', 'CUAAD', 'periferico norte', 'Centro universitario de Arte Arquitectura y diseño', 'universidad de arquitectura', 'facultad de arquitectura', 'arquitectura', 'UDG', 'universidad de Guadalajara', 'UDG', 'UdeG', 'huentintán','huentitán', 'huentitan', 'barranca', 'volcán babuyan', 'volcán Zacapu', 'Volcan popocatepetl', 'calzada independencia', 'Estación de microbús mirador', 'mi macro', 'macro bus', 'Zoológico', 'Zoologico', 'Periférico Norte', 'zoo', 'todos', 'andares'],
        'nombre_completo': 'Almira Mirador Vertical',
        'direccion': '📍Zona Barranca',#'C. Volcán Babuyan 5759, Huentitán El Bajo, Guadalajara, Jal.',
        'link_maps': 'https://goo.gl/maps/sfbU8NDCyCdeLfbm9 \u200B',
        'precio_desde': 1600000,
        'precio_hasta': 2750000,
        'num_recamaras': 2,
        'num_banos': 2,
        'num_estacionamientos': 2,

        'num_r_recamaras': '1 y 2',
        'num_r_banos': '1 y 2',
        'num_r_estacionamientos': '1 y 2'
    }
}

def buscar_desarrollo(ubicacion=None, presupuesto=None, recamaras=None, banos=None, estacionamientos=None):
    # Aquí va la lógica para buscar desarrollos según los criterios proporcionados
    # Retorna una lista de desarrollos que cumplen con los criterios de búsqueda
    # Puedes usar las funciones que definiste previamente como buscar_por_lugares_referencia, buscar_por_precio, etc.

    # Inicializamos una lista vacía para almacenar los resultados coincidentes
    resultados_coincidentes = []

    # Ejemplo de búsqueda por ubicación
    if ubicacion:
        desarrollos_por_ubicacion = buscar_por_lugares_referencia(ubicacion)
        resultados_coincidentes.extend(desarrollos_por_ubicacion)
        print("Resultados por ubicación:", desarrollos_por_ubicacion)

    # Ejemplo de búsqueda por precio
    if presupuesto:
        desarrollos_por_precio = buscar_por_precio(presupuesto)
        resultados_coincidentes.extend(desarrollos_por_precio)
        print("Resultados por precio:", desarrollos_por_precio)

    # Ejemplo de búsqueda por recámaras
    if recamaras:
        desarrollos_por_recamaras = buscar_por_recamaras(recamaras)
        resultados_coincidentes.extend(desarrollos_por_recamaras)
        print("Resultados por recámaras:", desarrollos_por_recamaras)

    # Ejemplo de búsqueda por baños
    if banos:
        desarrollos_por_banos = buscar_por_banos(banos)
        resultados_coincidentes.extend(desarrollos_por_banos)
        print("Resultados por baños:", desarrollos_por_banos)

    # Ejemplo de búsqueda por estacionamientos
    if estacionamientos:
        desarrollos_por_estacionamientos = buscar_por_estacionamientos(estacionamientos)
        resultados_coincidentes.extend(desarrollos_por_estacionamientos)
        print("Resultados por estacionamientos:", desarrollos_por_estacionamientos)

    # Eliminamos duplicados manteniendo el orden original de los resultados
    resultados_coincidentes = list(dict.fromkeys(resultados_coincidentes))

    return resultados_coincidentes

def buscar_por_lugares_referencia(lugar):
    resultados = []
    lugar = lugar.lower()  # Convertir a minúsculas
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        lugares_referencia = [lugar_ref.lower() for lugar_ref in info_desarrollo['lugares_referencia']]
        if lugar in lugares_referencia:
            resultados.append(desarrollo)
    return resultados


"""def buscar_por_lugares_referencia(lugar):
    resultados = []
    lugar = lugar.lower()  # Convertir a minúsculas
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        lugares_referencia = [lugar_ref.lower() for lugar_ref in info_desarrollo['lugares_referencia']]
        if lugar in lugares_referencia:
            resultados.append(desarrollo)
    return resultados"""



def buscar_por_precio(precio_minimo):
    precio_minimo_con_tolerancia = precio_minimo + 110000  # Agregar 100,000 de tolerancia

    desarrollos_precios = desarrollos_lugares_referencia.items()

    # Filtrar desarrollos con precios mayores o iguales al precio mínimo
    desarrollos_filtrados = [(desarrollo, info_desarrollo) for desarrollo, info_desarrollo in desarrollos_precios if info_desarrollo['precio_desde'] <= precio_minimo_con_tolerancia]

    if not desarrollos_filtrados:
        # Si no hay desarrollos con precios mayores o iguales al precio mínimo,
        # buscamos el desarrollo más cercano al precio mínimo
        desarrollo_mas_cercano = min(desarrollos_precios, key=lambda x: abs(x[1]['precio_desde'] - precio_minimo))
        return [desarrollo_mas_cercano[0]]
    else:
        # Si hay desarrollos que cumplen con el precio mínimo, los agregamos a los resultados
        return [desarrollo for desarrollo, _ in desarrollos_filtrados]



def buscar_por_recamaras(recamaras):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_recamaras'] >= recamaras:
            resultados.append(desarrollo)
    return resultados

def buscar_por_banos(banos):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_banos'] >= banos:
            resultados.append(desarrollo)
    return resultados

def buscar_por_estacionamientos(estacionamientos):
    resultados = []
    for desarrollo, info_desarrollo in desarrollos_lugares_referencia.items():
        if info_desarrollo['num_estacionamientos'] >= estacionamientos:
            resultados.append(desarrollo)
    return resultados






def obtener_info_desarrollos_coincidentes(desarrollos_coincidentes):
    if not desarrollos_coincidentes:
        return "No hemos encontrado desarrollos que se ajusten a tus necesidades."

    lista_desarrollos = []
    for desarrollo in desarrollos_coincidentes:
        if desarrollo in desarrollos_lugares_referencia:
            info_desarrollo = desarrollos_lugares_referencia[desarrollo]
            nombre_completo = info_desarrollo['nombre_completo']
            direccion = info_desarrollo['direccion']
            link_maps = info_desarrollo['link_maps']
            precio_desde = info_desarrollo['precio_desde']
            num_recamaras = info_desarrollo['num_r_recamaras']
            num_banos = info_desarrollo['num_r_banos']
            num_estacionamientos = info_desarrollo['num_r_estacionamientos']

            respuesta = f"*{nombre_completo}* 🏢 \n{direccion}\n{link_maps}\n💰 Desde: ${precio_desde:,}\n🛏️ Recámaras: {num_recamaras}, 🛁 Baños: {num_banos}, 🚗 Estacionamientos: {num_estacionamientos}\n\n"
            lista_desarrollos.append(respuesta)

    print("\n".join(lista_desarrollos))
    return "\n".join(lista_desarrollos)



"""
# Ejemplo de búsqueda por precio
precio_minimo = 3000000
desarrollos_coincidentes_precio = buscar_por_precio(precio_minimo)
informacion_desarrollos_precio = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_precio)
print(informacion_desarrollos_precio)"""


"""# Ejemplo de búsqueda por lugar de referencia
lugar_referencia = "andares"
desarrollos_coincidentes_lugar = buscar_por_lugares_referencia(lugar_referencia)
informacion_desarrollos_lugar = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_lugar)
print(informacion_desarrollos_lugar)"""

"""# Ejemplo de búsqueda por baños
desarrollos_coincidentes_banos = buscar_por_banos(4)
informacion_desarrollos_banos = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_banos)
print(informacion_desarrollos_banos)


# Ejemplo de búsqueda por recámaras
desarrollos_coincidentes_recamaras = buscar_por_recamaras(2)
informacion_desarrollos_recamaras = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_recamaras)
print(informacion_desarrollos_recamaras)


# Ejemplo de búsqueda por estacionamientos
desarrollos_coincidentes_estacionamientos = buscar_por_estacionamientos(1)
informacion_desarrollos_estacionamientos = obtener_info_desarrollos_coincidentes(desarrollos_coincidentes_estacionamientos)
print(informacion_desarrollos_estacionamientos)
"""